<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Memo - Weather</title>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; 
            background: linear-gradient(135deg, #ff416c, #4b6cb7);
            color: #fff;
        }

        /* Ø§Ù„Ø¨ÙˆÙƒØ³: Ø·ÙˆÙŠÙ„ ÙˆØ¹Ø±ÙŠØ¶ Ù…Ø¹ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        .container { 
            background: rgba(20, 20, 20, 0.95); 
            padding: 40px;
            border-radius: 30px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.5); 
            text-align: center; 
            width: 450px; 
            height: 550px; /* Ø·ÙˆÙ„ Ø«Ø§Ø¨Øª Ù„Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„ØªÙ…Ø±ÙƒØ² */
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ: Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† */
        .header-section { margin-top: 10px; }
        
        .brand-name { 
            color: #00d2ff; 
            font-size: 2.8rem; 
            font-weight: bold; 
            font-style: italic; 
            margin: 0;
        }

        .sub-title { 
            font-size: 1.2rem; 
            font-weight: bold; 
            margin: 5px 0; 
            color: #ccc; 
        }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆØ³Ø·: Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ§Ù„Ø¨Ø­Ø« (ÙŠØªÙ…Ø±ÙƒØ² ÙÙŠ ÙˆØ³Ø· Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©) */
        .main-content {
            flex-grow: 1; /* ÙŠØ£Ø®Ø° ÙƒÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ÙŠØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªÙˆØ³Ø· */
            display: flex;
            flex-direction: column;
            justify-content: center; /* ØªÙ…Ø±ÙƒØ² Ø¹Ù…ÙˆØ¯ÙŠ */
            gap: 15px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø­Ù‚Ù„ ÙˆØ§Ù„Ø²Ø± */
        }

        input { 
            padding: 15px; width: 100%; box-sizing: border-box; 
            border: 1px solid #333; background: #2a2a2a; color: #fff;
            border-radius: 12px; outline: none; font-size: 1.1rem;
            text-align: center;
        }

        button#searchBtn { 
            padding: 15px; background: #00d2ff; color: #000; 
            border: none; border-radius: 12px; cursor: pointer; 
            width: 100%; font-weight: bold; font-size: 1.1rem;
            transition: 0.3s;
        }
        button#searchBtn:hover { background: #00b4db; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªØ¸Ù‡Ø± ØªØ­Øª Ø²Ø± Ø§Ù„Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø±Ø© */
        #result { min-height: 100px; margin-top: 10px; }
        .weather-icon { font-size: 3rem; margin: 5px 0; display: block; }
        .temp-text { font-size: 2rem; font-weight: bold; }

        /* Ø²Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„: Ù†Øµ Ø£Ø²Ø±Ù‚ ØªØ­ØªÙ‡ Ø®Ø· */
        .lang-toggle-btn {
            background: transparent; 
            color: #00d2ff; 
            border: none;
            padding: 5px; 
            cursor: pointer; 
            font-weight: bold;
            font-size: 1rem;
            text-decoration: underline; /* Ø§Ù„Ø®Ø· ØªØ­Øª Ø§Ù„ÙƒÙ„Ù…Ø© */
            margin-bottom: 10px;
            align-self: center;
        }
    </style>
</head>
<body dir="ltr">

    <div class="container">
        <div class="header-section">
            <h1 class="brand-name">Data Memo</h1>
            <p id="subTitle" class="sub-title">for Weather Services</p>
        </div>
        
        <div class="main-content">
            <input type="text" id="city" placeholder="Enter city name...">
            <button id="searchBtn" onclick="fetchWeather()">Get Weather</button>
            
            <div id="result"></div>
        </div>

        <button class="lang-toggle-btn" id="langBtn" onclick="toggleLanguage()">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
    </div>

    <script>
        let currentLang = 'en';
        const translations = {
            en: { sub: "for Weather Services", placeholder: "Enter city name...", button: "Get Weather", toggleBtn: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", loading: "Searching...", city: "City", temp: "Temp", cond: "Condition", error: "City not found!" },
            ar: { sub: "Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·Ù‚Ø³", placeholder: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©...", button: "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù‚Ø³", toggleBtn: "English", loading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...", city: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", temp: "Ø§Ù„Ø­Ø±Ø§Ø±Ø©", cond: "Ø§Ù„Ø­Ø§Ù„Ø©", error: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©!" }
        };

        function getWeatherIcon(condition) {
            const cond = condition.toLowerCase();
            if (cond.includes('cloud')) return 'â˜ï¸';
            if (cond.includes('rain')) return 'ğŸŒ§ï¸';
            if (cond.includes('clear') || cond.includes('sun')) return 'â˜€ï¸';
            return 'ğŸŒ¡ï¸';
        }

        function toggleLanguage() {
            currentLang = (currentLang === 'en') ? 'ar' : 'en';
            const t = translations[currentLang];
            document.body.dir = (currentLang === 'ar') ? 'rtl' : 'ltr';
            document.getElementById('subTitle').innerText = t.sub;
            document.getElementById('city').placeholder = t.placeholder;
            document.getElementById('searchBtn').innerText = t.button;
            document.getElementById('langBtn').innerText = t.toggleBtn;
            document.getElementById('result').innerHTML = ""; 
        }

        async function fetchWeather() {
            const city = document.getElementById('city').value;
            const resultDiv = document.getElementById('result');
            if(!city) return;
            const t = translations[currentLang];
            resultDiv.innerHTML = `<p>${t.loading}</p>`;
            try {
                const response = await fetch(`/weather?city=${city}&lang=${currentLang}`);
                const data = await response.json();
                if(data.error) {
                    resultDiv.innerHTML = `<p style="color:#ff416c;">${t.error}</p>`;
                } else {
                    const icon = getWeatherIcon(data.condition);
                    resultDiv.innerHTML = `
                        <span class="weather-icon">${icon}</span>
                        <div class="temp-text">${data.temperature}</div>
                        <small style="color:#666">${data.timestamp}</small>
                    `;
                }
            } catch (e) { resultDiv.innerHTML = "Error!"; }
        }
    </script>
</body>
</html>